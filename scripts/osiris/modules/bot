alias pe ^xecho -b

# Bot List with auto op by Psychonut

alias botclean {
for (@i=1,i<=bothighest,@i++) {
@ botnick[$i] = []
@ botuser[$i] = []
@ bothost[$i] = []
@ botpass[$i] = []
@ botchan[$i] = []
@ botused[$i] = []
}
@ bothighest = 0
if ([$0]!=[-silent]) {pe Erased all bot entries}
}
alias botadd {
@ botexists = 0
for (@i=1,i<=bothighest,@i++) {
if ([$botnick[$i]] == [$0]) {
@ botexists = 1
}}
if (botexists) {pe $0 is already on your bot list.}
{
@ botlast = 1
botrest $*
}}
alias botrest {
if ([$botused[$botlast]]==[1]) {
@ botlast = botlast + 1
botrest $*
}{
if ([$4]) {
@ botnick[$botlast] = [$0]
@ botuser[$botlast] = [$2]
@ bothost[$botlast] = [$3]
@ botpass[$botlast] = [$4-]
@ botchan[$botlast] = [$1]
@ botused[$botlast] = 1
if (botlast >= bothighest) {
@ bothighest = botlast
}
}{
if ([$2]) {
@ thisbothost = _userhost($0)
if ([$thisbothost]!=[]) {
@ botnick = [$0]
@ botuser = [*] ## mid(1 999 $before(@ $thisbothost))
@ bothost = after(@ $thisbothost)
@ fixhost = [*.] ## after(. $bothost)
pe adding [$botnick] \($botnick\!$botuser\@$fixhost\) on $1 with command [$2-]
pe use /botsave to save bot list.
@ botnick[$botlast] = botnick
@ botuser[$botlast] = botuser
@ bothost[$botlast] = fixhost
@ botpass[$botlast] = [$2-]
@ botused[$botlast] = 1
@ botchan[$botlast] = [$1]
if (botlast >= bothighest) {
@ bothighest = botlast
}
}
{
pe $0\: no such nick
}
}
{
pe usage: /bot -add [botnick] [channel|*] [command]
pe  adds eggdrop bot to autoget ops from
}
}
}
}
alias bot {
@ botright = 0
if ([$0] == [-add]) {
botadd $1-
@botright = 1
}
if ([$0] == [-del]) {
botrem $1-
@botright = 1
}
if ([$0] == [-list]) {
botlist
@botright = 1
}
if ([$0] == [-clear]) {
botclean
@botright = 1
}
if ([$0] == [-save]) {
botsave
@botright = 1
}
if (!botright) {
pe usage: /bot [-add|-del|-list|-clear|-save]
pe
pe  	-add [nick] [channel|*] [command] :Add bot [nick] on [channel|*]
pe  		                           and send [command] on join
pe 	-del [nick] :remove bot [nick] from you bot list
pe 	-list :show bot list
pe 	-clear :clear bot list
pe 	-save :save bot list
pe
}}
alias botlist {
#if (bothighest) {
echo $cparse("%KÚ´ %ba u %Bt o %Kb o t ÃÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ-")
echo $cparse("%K³ %w$pad(18 Bot Mask) $pad(34 Channel) $pad(12 Command)")
for (@i=1,i<=bothighest,@i++) {
echo $cparse("%K³ %w$pad(-34 $botnick[$i]\!$botuser[$i]\@$bothost[$i]) $pad(15 $botchan[$i]) $pad(15 $botpass[$i])")
}
echo $cparse("%KÀ´ %bb o t %Bl i %Ks t ÃÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ-")
#}
#{pe No bots in list}
}

^on #-channel_synch 669 * {
fe ($chanusers($0)) ii {
for (@i=1,i<=bothighest,@i++) {
if ([$ii]==[$botnick[$i]]) {opcheck $i $0 $ii}
}}}
alias opcheck {
if ([$1]=~[$botchan[$0]]) {
@checkuh = _userhost($2)
@checkuser = before(@ $checkuh)
@checkhost = after(@ $checkuh)
if ([$checkuser]=~[$botuser[$0]]) {
if ([$checkhost]=~[$bothost[$0]]) {
if (ischanop($2 $1)) {
pe Sending $2 on $1 :$botpass[$0]
//^msg $2 $botpass[$0]
}}}}}
alias botrem {
if ([$0]) {
for (@i=1,i<=bothighest,@i++) {
if ([$0]==[$botnick[$i]]) {
dobotclean $i $0
pe $0 removed from bot list
pe use /botsave to save bot list
}}}
{pe usage: /bot -del [nick]
pe  Removes bot from your bot list
}}
alias dobotclean {
@ temphighest = 0
@ aa = 1
@ cleanref = [$0]
for (@i=1,i<=bothighest,@i++) {
if ([$i]!=[$cleanref]) {
@ tempnick[$aa] = botnick[$i]
@ tempchan[$aa] = botchan[$i]
@ temphost[$aa] = bothost[$i]
@ tempuser[$aa] = botuser[$i]
@ temppass[$aa] = botpass[$i]
@ temphighest = aa
@aa++
}}
botclean -silent
addback
}
alias addback {
if (temphighest) {
for (@i=1,i<=temphighest,@i++) {
botadd $tempnick[$i] $tempchan[$i] $tempuser[$i] $temphost[$i] $temppass[$i]
}}}
#alias bothelp {
#pe Botadd <nick> <channel> <password> - Add eggdrop bot to bot list
#pe Botrem <nick> - remove bot from botlist
#pe Botlist - show bot list
#pe Botsave - same bot list
#pe Botclean - clear bot list
#}
alias botsave {
if ([fexist(~/.psos.botlist)] != [-1]) {^exec rm ~/.psos.botlist}
for (@i=1,i<=bothighest,@i++) {
^exec echo \"\@ botnick\[$i\] \= \[$botnick[$i]\]\" >> ~/.psos.botlist
^exec echo \"\@ botchan\[$i\] \= \[$botchan[$i]\]\" >> ~/.psos.botlist
^exec echo \"\@ botuser\[$i\] \= \[$botuser[$i]\]\" >> ~/.psos.botlist
^exec echo \"\@ bothost\[$i\] \= \[$bothost[$i]\]\" >> ~/.psos.botlist
^exec echo \"\@ botpass\[$i\] \= \[$botpass[$i]\]\" >> ~/.psos.botlist
^exec echo \"\@ botused\[$i\] \= 1\" >> ~/.psos.botlist
}
^exec echo \"\@ bothighest \= \[$bothighest\]\" >> ~/.psos.botlist
pe Bot List saved
}
if (fexist(~/.psos.botlist) != -1) {
^load ~/.psos.botlist
#pe Loading bot list
}

### set up color tables. (from argon, makes ripping argon stuff easier)

^assign cl [0m
^assign names lk hk lr hr lg hg ly hy lb hb lm hm lc hc lw hw x cl
^assign colors [0;30m [0;1;30m [0;31m [0;1;31m [0;32m [0;1;32m [0;33m [0;1;33m [0;34m [0;1;34m [0;35m [0;1;35m [0;36m [0;1;36m [0;37m [0;1;37m [0m [0m
^assign colorsb [0;44;30m [0;1;44;30m [0;44;31m [0;1;44;31m [0;44;32m [0;1;44;32m [0;44;33m [0;1;44;33m [0;44;34m [0;1;44;34m [0;44;35m [0;1;44;35m [0;44;36m [0;1;44;36m [0;44;37m [0;1;44;37m [0;44m [0;44m
^assign names1 hk hr hg hy hb hm hc hw
^assign colors1 [1;30m [1;31m [1;32m [1;33m [1;34m [1;35m [1;36m [1;37m

for (@i=0,i<#names,@i++) {
  @ c.$word($i $names) = word($i $colors)
  @ c.bb.$word($i $names) = word($i $colorsb)}
for (@i=0,i<#names1,@i++) {
  @ c1.$word($i $names1) = word($i $colors1)}

@ colors = names = colorsb = names1 = colors1 = []
